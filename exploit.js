(function() {
    'use strict';

    let existingWebSockets = [];

    const OriginalWebSocket = window.WebSocket;
    window.WebSocket = function(url, protocols) {
        const ws = new OriginalWebSocket(url, protocols);
        existingWebSockets.push(ws);
        return ws;
    };
    window.WebSocket.prototype = OriginalWebSocket.prototype;

    function sendOverExistingWebSockets(data) {
        existingWebSockets.forEach(ws => {
            if (ws.readyState === WebSocket.OPEN) {
                ws.send(JSON.stringify(data));
                console.log('Data sent over WebSocket:', data);
            }
        });
    }

    function manipulateELO() {
        if (typeof bD !== 'undefined' && bD.dO && bD.dO.data) {
            if (typeof bD.dO.data[105] === 'undefined' || typeof bD.dO.data[105].value === 'undefined') {
                bD.dO.data[105] = { value: '8h5fh7' };
            }

            if (typeof bD.dO.data[106] === 'undefined' || typeof bD.dO.data[106].value === 'undefined') {
                bD.dO.data[106] = { value: 'exploitUser' };
            }

            if (typeof bD.dO.data[116] === 'undefined') {
                bD.dO.data[116] = { value: '' };
            }

            if (typeof bD.dO.data[116].value === 'undefined') {
                bD.dO.data[116].value = 'qSfCs;LjFceF7B;FceF7;LjFceF7P';
            }

            bD.dO.data[116].value = 'qSfCs;LkFceF7A;' + bD.dO.data[116].value;

            console.log('Manipulated bD.dO.data[116]:', bD.dO.data[116].value);

            if (typeof oa === 'function') {
                let oaInstance = new oa();
                oaInstance.ot();
            }

            if (typeof bD.dO.data[117] === 'undefined') {
                bD.dO.data[117] = { value: 0, o8: [] };
            }

            bD.dO.data[117].o8.push('qSfDs');
            bD.dO.data[117].value = bD.dO.data[117].o8.length - 1;

            console.log('Manipulated bD.dO.data[117]:', bD.dO.data[117]);

            sendOverExistingWebSockets({
                type: 'updateELO',
                user: 'qSfDs',
                elo: 150
            });

        } else {
            console.log('bD.dO.data does not exist.');
        }
    }

    setInterval(manipulateELO, 1000);

})();
